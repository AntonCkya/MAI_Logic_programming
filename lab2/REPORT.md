# Отчет по лабораторной работе №2
## по курсу "Логическое программирование"

## Решение логических задач

### студент: Сысоев М.А.

## Результат проверки

| Преподаватель     | Дата         |  Оценка       |
|-------------------|--------------|---------------|
| Сошников Д.В. |              |               |
| Левинская М.А.|   21.12      |       5       |

> *Комментарии проверяющих (обратите внимание, что более подробные комментарии возможны непосредственно в репозитории по тексту программы)*


## Введение

На мой взгляд, два самых распространенных метода решения логических задач - это полный перебор и метод исключения. В первом случае просто перебираются все возможные варианты, и для какого-либо конкретного значения проверяется истинность остальных высказываний. Во втором случае можно попытаться сразу определить противоречащие друг другу случаи и отсечь их, благодаря чему сузить количество возможных вариантов.

Такие задачи построены на логике высказываний, которая довольно лекго переносится на логику предикатов, с которой и работает prolog. Благодаря этому, достаточно описать все высказывания из задачи, а Prolog выведет для нее все решения, если такие имеются.

## Задание

Незадолго до Нового года мать собрала своих дочерей. "Поговорим, девушки, о подарках,- сказала она. Каждая из вас может истратить по двадцати рублей. Разделите свои деньги каждая на три разные части, но так, чтобы в любой из них было целое число рублей. На подарки для дяди Алеши расходуйте наименьшую часть денег. На подарки для отца тратьте среднюю из частей. А самые дорогие подарки покупайте для тети Маргариты. Только постарайтесь разделить деньги каждая по-разному". Девушки в точности выполнили условия. Известно, что они израсходовали на подарки тете Маргарите в общей сложности 52 рубля. Даша потратила на подарок для дяди Алеши меньше всех 3 рубля. Сколько денег израсходовали девушки на подарки для отца?

## Принцип решения

Решить задачу получится перебором всех возможных вариантов. Для начала, необходимо найти все возможные разбиения денег, учитывая условия задачи. Этим занимается предикат `create_the_list(X)`
```prolog
% M - Маргарита, F - отец, A - Алёша
create_the_list([M, F, A]) :-
  for(A, 3, 20), 
  for(F, 3, 20),
  for(M, 3, 20),
  A < F,
  F < M,
  20 is M + F + A.
```

После этого, нужно перебрать все его подмножества при помощи предиката `sublist(L, S)`. Для каждого подмножества проверяем, что сумма денег на подарки для Маргариты равна 52 `sum_by_idx(S, 0, 52)`, а также то, что существует только одна дочка, которая потратила 3 рубля на подарок для Алёши `check_only_one_dasha(S)`.

Если все условия выполнены, то просто находим ответ к задаче:
`sum_by_idx(S, 1, F)`

Решение задачи выполняется при помощи предиката `launch`:
```prolog
launch :-
  setof(X, create_the_list(X), L),
  sublist(L, S),
  sum_by_idx(S, 0, 52),
  check_only_one_dasha(S),
  sum_by_idx(S, 1, F),
  write("The amount of money spent on gifts for the father: "), write(F), nl, !.
```

Результат программы:
```prolog
?- launch.
The amount of money spent on gifts for the father: 28
true.

```

## Анализ эффективности, безопасности и непротиворечивости решения
Предикат `for` работает за `O(n)`,
где `n` - длина промежутка, который перебирает цикл.
Генерация списка разбиений имеет 3 вложенных цикла for, поэтому его
сложность - `O(n^3)`, где n - длина промежутков. Предикат `launch` перебирает подмножества
списка разбиений -  его сложность равна `O(2^n)`, где n - длина списка.

Решение является безопасным, так как срабатывает оператор отсечения, гарантирующий завершение программы после первого - верного ответа. 

Предикат `launch` находит единственно верное решение.

## Выводы

Приходилось решать подобные задачи с помощью листочка и ручки на курсе дискретной математики год назад. Помню, что у многих это вызывало трудности. Если же человек не любит решать подобные задачи, но любит программировать, то спасением для него станет prolog. Необходимо буквально программным образом задать условия задачи и интерпретатор сам найдёт решения, без трудоёмких для человека аналитических размышлений. 

И всё же, алгоритмы могут быть довольно медленными из-за большого количества переборов, однако, считаю, что для подобной задачи это не критично. Решение понятно, без лишних наворотов, при всём этом работает верно и намного быстрее человека с ручкой и бумажкой. 




